/*!jQuery FA multi button*/
(function(a){a.fn.famultibutton=function(e){if(this.length>1){this.each(function(){a(this).famultibutton(e)});return this}var B=this;var j=false;var h;var w;var c=false;var r=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470];var y=0;var d=0;var p=0;var m=0;var s=0;var z=false;var o=false;var D={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,max:100,min:0,step:1};var g=a.extend({},D,e);var i=function(){g=a.extend({},g,B.data());B.addClass("fa-stack");jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(g.backgroundIcon).appendTo(B);jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(g.icon).appendTo(B);if(g.classes&&g.classes.length>0){for(var F=0;F<g.classes.length;F++){B.addClass(g.classes[F])}}E();if(g.mode=="dimmer"){a("<canvas>").attr({id:"scale"}).appendTo(B);h=B.find("canvas#scale");h.css({height:B.innerHeight()+4});m=parseInt(h.offset().top)-parseInt(B.offset().top);b();l()}B.o=g;B.data("famultibutton",B);return B};function t(){j=true;B.children().filter("#bg").css("color",g.onBackgroundColor);B.children().filter("#fg").css("color",g.onColor);B.trigger("setOn")}function E(){j=false;B.children().filter("#bg").css("color",g.offBackgroundColor);B.children().filter("#fg").css("color",g.offColor);B.trigger("setOff")}function k(){if(j){j=false;a("<div />").animate({width:100},{duration:700,easing:"swing",step:function(G,H){var F=(G-H.start)/(H.end-H.start);B.children().filter("#bg").css("color",getGradientColor(g.onBackgroundColor,g.offBackgroundColor,F));B.children().filter("#fg").css("color",getGradientColor(g.onColor,g.offColor,F))}})}}function n(I){var H=B.find("canvas#progress");if(I>0){if(H.length==0){H=a("<canvas>").attr({id:"progress"}).appendTo(B)}var G=H[0];if(G){G.height=B.height();G.width=B.width();var F=G.width/2;var K=G.height/2;if(G.getContext){var J=G.getContext("2d");J.beginPath();J.strokeStyle=g.onColor;J.arc(F,K,F*((-0.4/90)*Number(g.progressWidth)+0.8),-0.5*Math.PI,(-0.5+I*2)*Math.PI,false);J.lineWidth=F*0.8*g.progressWidth/100;J.stroke()}}}else{B.find("canvas#progress").remove()}}rgbToHex=function(F){var G=F.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(G&&G.length===4)?"#"+("0"+parseInt(G[1],10).toString(16)).slice(-2)+("0"+parseInt(G[2],10).toString(16)).slice(-2)+("0"+parseInt(G[3],10).toString(16)).slice(-2):F};getGradientColor=function(J,M,N){J=rgbToHex(J).replace(/^\s*#|\s*$/g,"");M=rgbToHex(M).replace(/^\s*#|\s*$/g,"");if(J.length==3){J=J.replace(/(.)/g,"$1$1")}if(M.length==3){M=M.replace(/(.)/g,"$1$1")}var F=parseInt(J.substr(0,2),16),I=parseInt(J.substr(2,2),16),G=parseInt(J.substr(4,2),16);var H=parseInt(M.substr(0,2),16),L=parseInt(M.substr(2,2),16),O=parseInt(M.substr(4,2),16);var P=H-F;var Q=L-I;var K=O-G;P=((P*N)+F).toString(16).split(".")[0];Q=((Q*N)+I).toString(16).split(".")[0];K=((K*N)+G).toString(16).split(".")[0];if(P.length==1){P="0"+P}if(Q.length==1){Q="0"+Q}if(K.length==1){K="0"+K}return"#"+P+Q+K};function f(){clearTimeout(w);d=(p>0)?d-=g.step:d+=g.step;if(d>g.max){d=g.max}if(d<g.min){d=g.min}b();var F=(r[Math.abs(p)]);w=setTimeout(function(){f()},500-F)}function b(){var H=h[0];H.height=B.innerHeight();H.width=B.innerWidth();if(H.getContext){var K=H.getContext("2d");K.strokeStyle=g.offBackgroundColor;var F=g.max;var J=g.min;var G=H.height-Math.round(H.height*(d-J)/(F-J));for(var I=0;I<H.height;I+=4){K.lineWidth=1;K.beginPath();K.moveTo(5,I);K.lineTo(25,I);K.stroke()}K.strokeStyle=(j)?g.onBackgroundColor:getGradientColor(g.offBackgroundColor,"#ffffff",0.4);K.lineWidth=3;K.beginPath();K.moveTo(5,G);K.lineTo(25,G);K.stroke();K.fillStyle=getGradientColor(g.offBackgroundColor,"#ffffff",0.4);K.font="10px sans-serif";K.fillText(d,30,H.height)}}function l(){h.css({position:"absolute","z-index":-1});if(z){h.animate({left:-B.innerWidth()*0.6+"px"})}else{h.animate({left:B.innerWidth()/5+"px",top:m})}}var v,u;var A=((document.ontouchstart!==null)?"mousedown":"touchstart");var C=((document.ontouchmove!==null)?"mousemove":"touchmove");var q=((document.ontouchend!==null)?"mouseup":"touchend");var x=((document.ontouchleave!==null)?"mouseout":"touchleave");if(g.mode=="push"){this.bind(A,function(F){u=a(window).scrollTop();v=a(window).scrollLeft()}).bind(q,function(F){if(Math.abs(u-a(window).scrollTop())>3||(Math.abs(v-a(window).scrollLeft())>3)){return}t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}setTimeout(function(){k()},200)})}else{if(g.mode=="toggle"){this.bind(A,function(F){u=a(window).scrollTop();v=a(window).scrollLeft()}).bind(q,function(F){if(Math.abs(u-a(window).scrollTop())>3||(Math.abs(v-a(window).scrollLeft())>3)){return}if(j){E();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}})}else{if(g.mode=="dimmer"){this.bind(A,function(G){var F=G.originalEvent;y=F.touches?F.touches[0].clientY:G.pageY;p=0;o=true;G.preventDefault()});this.bind(x,function(F){if(z){z=false;B.animate({top:0});clearInterval(w);c=false;l()}o=false;F.preventDefault()});this.bind(q,function(F){if(z){z=false;B.animate({top:0});clearTimeout(w);c=false;if(typeof g.valueChanged==="function"){g.valueChanged.call(this,d)}}else{if(j){E();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}}z=false;o=false;l();b();F.preventDefault()});this.bind(C,function(G){if(o){z=true}var F=G.originalEvent;s=F.touches?F.touches[0].clientY:G.pageY;p=s-y;if(p>20){p=20}if(p<-20){p=-20}if(z){this.style.top=p+"px";if(!c){l();f();c=true}h.css({top:-p+"px"})}G.preventDefault()})}}}this.setOn=function(){t()};this.setOff=function(){E()};this.getState=function(){return j};this.getValue=function(){return d};this.setDimValue=function(F){d=F;b()};this.setProgressValue=function(F){n(F)};return i()}})(jQuery);